!function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/activity.html",'<dl class="mod_path">\n    <dt>活动管理</dt>\n    <dd>您可以对活动进行管理</dd>\n</dl>\n\n<dl class="mod_list mb10">\n    <dt>\n        <div ng-click="setSelect($event, \'all\')" class="t_checkbox" ng-class="{select: Page.isAll}"></div>\n        <div>编号</div>\n        <div>活动封面</div>\n        <div>活动标题</div>\n        <div style="width:250px;">活动描述</div>\n        <div>活动类型</div>\n        <div>创建时间</div>\n        <div>操作</div>\n    </dt>\n    <dd ng-repeat="(k, v) in DataList.ActivityList track by $index">\n        <div ng-click="setSelect($event)" data-id="{{v.ActivityId}}" data-key="{{k}}" class="t_checkbox" ng-class="{select: v.Check}"></div>\n        <div>{{v.ActivityId}}</div>\n        <div><a ui-sref="mange.club-thread({id: v.ActivityId})"><img ng-src="{{v.ImageUrl}}" /></a></div>\n        <div>{{v.ActivityName}}</div>\n        <div>{{v.Description}}</div>\n        <div>{{v.ActivityLabel}}</div>\n        <div>{{v.CreateTime}}</div>\n        <div>\n            <p ng-click="editActivity(v.ActivityId)">编辑</p>\n            <p ng-click="delActivity(v.ActivityId)">删除</p>\n        </div>\n    </dd>\n</dl>\n\n<div class="mod_nodata mb10" ng-if="!DataList.ActivityList || DataList.ActivityList.length == 0"></div>\n\n<show-page></show-page>\n\n<ul class="mod_btn_list mb10">\n    <li ng-click="delActivity()">批量删除</li>\n    <li><a ui-sref="mange.activity-add">添加活动</a></li>\n</ul>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/cate.html",'<dl class="mod_path">\n    <dt>标签管理</dt>\n    <dd>您可以对标签进行管理</dd>\n</dl>\n\n<dl class="mod_cate_list">\n    <dt>\n        <div></div>\n        <div><input type="checkbox" /></div>\n        <div>ID</div>\n        <div>标签名称</div>\n        <div>操作</div>\n    </dt>\n    <list class="b_0" ng-repeat="(k, v) in CateList track by $index">\n        <dd>\n            <div ng-class="{sum: v.HasSub && !v.ShowSub, minus: v.ShowSub}" ng-click="showCate({e: $event, id: v.CateId, sub: v.HasSub, key: k})"></div>\n            <div>\n                <input type="checkbox" ng-click="toggle(v.CateId)" ng-if="!v.HasSub" />\n            </div>\n            <div>{{v.CateId}}</div>\n            <div>{{v.CateName}}</div>\n            <div>\n                <i ng-click="modify(v.CateId)">修改</i>\n                <i ng-click="add(v.CateId)">增加子类</i>\n                <i ng-click="delete(v.CateId)" ng-if="!v.HasSub">删除</i>\n            </div>\n        </dd>\n\n        <list class="b_1" ng-repeat="(ik, iv) in CateList[k].Sub track by $index">\n            <dd>\n                <div ng-class="{sum: iv.HasSub && !iv.ShowSub, minus: iv.ShowSub}" ng-click="showCate({e: $event,id: iv.CateId, sub: iv.HasSub, key: ik, pid: v.CateId, pkey: k})"></div>\n                <div><input type="checkbox" ng-click="toggle(iv.CateId)" ng-if="!iv.HasSub" /></div>\n                <div>{{iv.CateId}}</div>\n                <div class="t_1">{{iv.CateName}}</div>\n                <div>\n                    <i ng-click="modify(iv.CateId)">修改</i>\n                    <i ng-click="add(iv.CateId)">增加子类</i>\n                    <i ng-click="del(iv.CateId)" ng-if="!iv.HasSub">删除</i>\n                </div>\n            </dd>\n\n            <list class="b_2" ng-repeat="(jk, jv) in CateList[k].Sub[ik].Sub track by $index">\n                <dd>\n                    <div></div>\n                    <div>\n                        <input type="checkbox" ng-click="toggle(jv.CateId)" ng-if="!jv.HasSub" />\n                    </div>\n                    <div>{{jv.CateId}}</div>\n                    <div class="t_2">{{jv.CateName}}</div>\n                    <div>\n                        <i ng-click="modify(jv.CateId)">修改</i>\n                        <!-- <i>增加子类</i> -->\n                        <i ng-click="del(jv.CateId)" ng-if="!jv.HasSub">删除</i>\n                    </div>\n                </dd>\n            </list>\n        </list>\n    </list>\n</dl>\n<!-- <input type="file" ng-model="Deploy.currentImage" accept="image/*" app-filereader /> -->\n')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/club.html",'<dl class="mod_path">\n    <dt>圈子管理</dt>\n    <dd>您可以对圈子进行管理</dd>\n</dl>\n\n<dl class="mod_list mb10">\n    <dt>\n        <div ng-click="setSelect($event, \'all\')" class="t_checkbox" ng-class="{select: Page.isAll}"></div>\n        <div>编号</div>\n        <div>圈子图片</div>\n        <div>圈子名称</div>\n        <div>圈子简介</div>\n        <div>圈子标签</div>\n        <div>帖子数</div>\n        <div>成员数</div>\n        <div>创建时间</div>\n        <div>操作</div>\n    </dt>\n    <dd ng-repeat="(k, v) in DataList.ClubList track by $index">\n        <div ng-click="setSelect($event)" data-id="{{v.ClubId}}" data-key="{{k}}" class="t_checkbox" ng-class="{select: v.Check}"></div>\n        <div>{{v.ClubId}}</div>\n        <div><a ui-sref="mange.club-thread({id: v.ClubId})"><img ng-src="{{v.ImageUrl}}" /></a></div>\n        <div>{{v.ClubName}}</div>\n        <div>{{v.Description}}</div>\n        <div>\n            <span style="padding-right:5px;" ng-repeat="(key, item) in v.CategoryList track by $index">{{item.CateName}}</span>\n        </div>\n        <div>{{v.TotalArticle}}</div>\n        <div>{{v.TotalUser}}</div>\n        <div>{{v.CreateTime}}</div>\n        <div>\n            <p ng-click="editClub(v.ClubId)">编辑</p>\n            <p ng-click="delClub(v.ClubId)">删除</p>\n        </div>\n    </dd>\n</dl>\n\n<div class="mod_nodata mb10" ng-if="!DataList.ClubList || DataList.ClubList.length == 0"></div>\n\n<ul class="mod_btn_list mb10">\n    <li ng-click="delClub()">批量删除</li>\n    <li><a ui-sref="mange.club-add">添加圈子</a></li>\n</ul>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/club_add.html",'<dl class="mod_path">\n    <dt>圈子添加</dt>\n    <dd>您可以对圈子进行管理</dd>\n</dl>\n\n<ul class="mod_add mb10">\n    <li>\n        <label>圈子名称</label>\n        <input ng-model="ClubName" type="text" placeholder="请输入圈子名称" />\n    </li>\n    <li>\n        <label>圈子图片</label>\n        <div class="t_upload">\n            <img data-ng-src="{{ImageUrl}}" />\n            <input type="file" ng-model="ImageUrl" accept="image/*" app-filereader />\n        </div>\n    </li>\n    <li>\n        <label>圈子简介</label>\n        <textarea ng-model="Description" placeholder="请输入圈子简介"></textarea>\n    </li>\n    <li>\n        <label>圈子标签</label>\n    </li>\n</ul>\n\n<ul class="mod_btn_list mb10">\n    <li ng-click="addClub()">保存</li>\n</ul>\n\n<canvas id="tmp" style="display:none;"></canvas>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/club_thread.html",'<dl class="mod_path">\n    <dt>圈子帖子管理</dt>\n    <dd>您可以对圈子进行管理</dd>\n</dl>\n\n<dl class="mod_list">\n    <dt>\n        <div><input type="checkbox" /></div>\n        <div>编号</div>\n        <div>圈子名称</div>\n        <div>圈子简介</div>\n        <div>圈子标签</div>\n        <div>帖子数</div>\n        <div>成员数</div>\n        <div>圈子图片</div>\n        <div>创建时间</div>\n        <div>操作</div>\n    </dt>\n    <dd ng-repeat="(k, v) in DataList.ClubList track by $index">\n        <div></div>\n        <div>{{v.ClubId}}</div>\n        <div><a ui-sref="mange.club-thread({id: v.ClubId})">{{v.ClubName}}</a></div>\n        <div>{{v.Description}}</div>\n        <div>\n            <span style="padding-right:5px;" ng-repeat="(key, item) in v.CategoryList track by $index">{{item.CateName}}</span>\n        </div>\n        <div>{{v.TotalArticle}}</div>\n        <div>{{v.TotalUser}}</div>\n        <div><img ng-src="{{v.ImageUrl}}" /></div>\n        <div>{{v.CreateTime}}</div>\n        <div>\n            <p>编辑</p>\n            <p>删除</p>\n        </div>\n    </dd>\n</dl>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/comment.html",'<dl class="mod_path">\n    <dt>评论管理</dt>\n    <dd>您可以对评论进行删除</dd>\n</dl>\n\n<dl class="mod_list mb10">\n    <dt>\n        <div ng-click="setSelect($event, \'all\')" class="t_checkbox" ng-class="{select: Page.isAll}"></div>\n        <div>编号</div>\n        <div style="width:300px;">评论内容</div>\n        <div>评论者</div>\n        <div>评论时间</div>\n        <div>操作</div>\n    </dt>\n    <dd ng-repeat="(k, v) in DataList.CommentList track by $index">\n        <div ng-click="setSelect($event)" data-id="{{v.CommentId}}" data-key="{{k}}" class="t_checkbox" ng-class="{select: v.Check}"></div>\n        <div>{{v.CommentId}}</div>\n        <div><a ui-sref="mange.list-detail({id: v.ArticleId})">{{v.Content}}</a></div>\n        <div>{{v.Author.UserName}}</div>\n        <div>{{v.UpdateTime}}</div>\n        <div>\n            <p ng-click="delComment(v.CommentId)">删除</p>\n        </div>\n    </dd>\n</dl>\n\n<div class="mod_nodata mb10" ng-if="!DataList.CommentList || DataList.CommentList.length==0"></div>\n\n<show-page></show-page>\n\n<ul class="mod_btn_list mb10" ng-class="DataList.CommentList && DataList.CommentList.length>0">\n    <li ng-click="delComment()">批量删除</li>\n</ul>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/index.html",'sadfasdfasd\n\n<!-- <input type="file" ng-model="Deploy.currentImage" accept="image/*" app-filereader /> -->\n')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/list.html",'<dl class="mod_path">\n    <dt>标签管理</dt>\n    <dd>您可以对标签进行管理</dd>\n</dl>\n\n<section class="filter_cate" ng-if="CateList.length > 0">\n    <select ng-repeat="(k, v) in CateList track by $index" ng-options="option.CateId as option.CateName for option in v.CategoryList" ng-model="Page.CateId[k]" ng-change="changeCate(k)">\n        <!-- <option ng-repeat="(i, item) in v.CategoryList track by $index" id="{{item.CateId}}">{{item.CateName}}</option> -->\n    </select>\n </section>\n\n<section class="list_article" ng-if="DataList.ArticleList.length > 0">\n    <h3 ng-click="setSelect($event, \'all\')" class="t_checkbox" ng-class="{select: Page.isAll}">\n        全选\n    </h3>\n    <ul>\n        <li ng-repeat="(k, v) in DataList.ArticleList track by $index">\n            <div class="t_img" ui-sref="mange.list-detail({id: v.ArticleId, type: Page.Type})">\n                <img ng-src="{{v.Images[0].ImageUrl}}" />\n            </div>\n            <div class="t_cate">\n                <p ng-click="setSelect($event)" data-id="{{v.ArticleId}}" data-key="{{k}}" ng-class="{select: v.Check}"></p>\n                <i ng-repeat="(i, item) in v.CategoryList track by $index">#{{item.CateName}}</i>\n            </div>\n            <div class="t_time">{{v.CreateTime}}</div>\n            <div class="t_btn">\n                <p data-id="{{v.ArticleId}}" ng-click="setCheck($event, v.ArticleId)" data-type="yCate" ng-if="v.EditState==\'nCate\'">\n                    推荐栏目页\n                </p>\n                <p data-id="{{v.ArticleId}}" ng-click="setCheck($event, v.ArticleId)" data-type="nCate" ng-if="v.EditState==\'yCate\'" class="t_color">\n                    取消栏目页\n                </p>\n                <p data-id="{{v.ArticleId}}" ng-click="setCheck($event, v.ArticleId)" data-type="yHome" ng-if="v.HomeState==\'nHome\'">\n                    推荐首页\n                </p>\n                <p data-id="{{v.ArticleId}}" ng-click="setCheck($event, v.ArticleId)" data-type="nHome" ng-if="v.HomeState==\'yHome\'" class="t_color">\n                    取消首页\n                </p>\n                <p data-id="{{v.ArticleId}}" ng-click="delData($event, v.ArticleId)">删除</p>\n            </div>\n        </li>\n    </ul>\n</section>\n\n\n<div class="mod_nodata mb10" ng-if="DataList.ArticleList.length == 0"></div>\n\n<!-- <ul ngd-click="changePage($event)" selector="li" class="mod_page mb10">\n    <li data-id="1">1</li>\n    <li data-id="2">2</li>\n    <li data-id="3">3</li>\n    <li data-id="4">4</li>\n</ul> -->\n<show-page></show-page>\n\n\n<ul class="mod_btn_list mb10" ng-if="DataList.ArticleList && DataList.ArticleList.length>0">\n<!--     <li class="t_select">\n        <select>\n            <option>选择栏目</option>\n            <option>1123</option>\n            <option>1123</option>\n            <option>1123</option>\n            <option>1231</option>\n        </select>\n        <select>\n            <option>11232</option>\n            <option>21231</option>\n            <option>31231</option>\n            <option>41231</option>\n        </select>\n        <select>\n            <option>121231231232</option>\n            <option>21</option>\n            <option>31</option>\n            <option>41</option>\n        </select>\n    </li>\n\n    <li ng-click="setCate($event)">批量归类</li>\n    <li ng-click="delData($event)">批量删除</li> -->\n\n    <li ng-click="setCheck($event)" data-type="yCate">推荐栏目页</li>\n    <li ng-click="setCheck($event)" data-type="nCate">取消推荐栏目页</li>\n    <li ng-click="setCheck($event)" data-type="yHome">推荐首页</li>\n    <li ng-click="setCheck($event)" data-type="nHome">取消推荐首页</li>\n</ul>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/list_detail.html",'<section class="article_detail">\n    <ul class="t_content">\n        <li ng-repeat="(k, v) in DataList.Images track by $index">\n            <img ng-src="{{v.ImageUrl}}" />\n            <div data-ng-bind-html="v.Description">{{v.Description}}</div>\n        </li>\n    </ul>\n\n    <div class="t_author">\n        <img ng-src="{{DataList.Author.ImageUrl}}" />\n        <div>\n            <h4>{{DataList.Author.UserName}}</h4>\n            发布到：<i ng-repeat="(k, v) in DataList.CategoryList track by $index">#{{v.CateName}}</i>\n        </div>\n    </div>\n</section>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/login.html",'\n\n<!-- <input type="file" ng-model="Deploy.currentImage" accept="image/*" app-filereader /> -->\n\n<ul class="mod_login">\n    <li>\n        <label>手机号：</label>\n        <input ng-model="cInput.Phone" type="text" placeholder="手机号" />\n    </li>\n    <li>\n        <label>密码：</label>\n        <input ng-model="cInput.Password" type="password" placeholder="输入用户密码" />\n    </li>\n    <li>\n        <label>验证码：</label>\n        <input ng-model="cInput.Code" type="text" placeholder="验证码" />\n        <div>1234</div>\n    </li>\n    <li ng-click="toLogin()">登录</li>\n</ul>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/main.html",'<header-bar></header-bar>\n\n<section class="mod_wrapper">\n    <menu-bar></menu-bar>\n    <div class="mod_right" ui-view></div>\n</section>\n')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/password.html",'<section class="mod_password">\n    <ul>\n        <li>\n            <label>旧密码：</label>\n            <input type="password" />\n        </li>\n        <li>\n            <label>新密码：</label>\n            <input type="password" />\n        </li>\n        <li>\n            <label>确认新密码：</label>\n            <input type="password" />\n        </li>\n    </ul>\n\n    <button ng-click="setModify()">提交</button>\n</section>\n')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/role.html",'<dl class="mod_path">\n    <dt>管理员管理</dt>\n    <dd>您可以对管理员进行管理</dd>\n</dl>\n\n<dl class="mod_list mb10">\n    <dt>\n        <div>编号</div>\n        <div>用户名</div>\n        <div>操作</div>\n    </dt>\n    <dd ng-repeat="(k, v) in DataList.UserList track by $index">\n        <div>{{v.UserId}}</div>\n        <div>{{v.UserName}}</div>\n        <div>\n            <p ng-click="delRole(v.UserId)">删除</p>\n        </div>\n    </dd>\n</dl>\n\n<div class="mod_nodata" ng-if="!DataList.UserList || DataList.UserList.length == 0"></div>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/role_add.html",'<dl class="mod_path">\n    <dt>管理员添加</dt>\n    <dd>您可以对管理员进行管理</dd>\n</dl>\n\n<ul class="mod_add mb10">\n    <li>\n        <label>用户名：</label>\n        <input ng-model="tInput.UserName" type="text" placeholder="请输入用户名称" />\n    </li>\n    <li>\n        <label>用户角色：</label>\n        <select ng-options="option.id as option.name for option in RoleList" ng-model="tInput.Type">\n             <!-- ng-change="changeRole(k)" -->\n        </select>\n    </li>\n</ul>\n\n<ul class="mod_btn_list mb10">\n    <li ng-click="addRole()">保存</li>\n</ul>\n\n')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/subject.html",'<dl class="mod_path">\n    <dt>专题管理</dt>\n    <dd>您可以对专题进行管理</dd>\n</dl>\n\n<dl class="mod_list mb10">\n    <dt>\n        <div ng-click="setSelect($event, \'all\')" class="t_checkbox" ng-class="{select: Page.isAll}"></div>\n        <div>编号</div>\n        <div>专题封面</div>\n        <div>专题标题</div>\n        <div>标题简写</div>\n        <div style="width:250px;">专题描述</div>\n        <div>帖子数</div>\n        <div>创建时间</div>\n        <div>操作</div>\n    </dt>\n    <dd ng-repeat="(k, v) in DataList.SubjectList track by $index">\n        <div ng-click="setSelect($event)" data-id="{{v.SubjectId}}" data-key="{{k}}" class="t_checkbox" ng-class="{select: v.Check}"></div>\n        <div>{{v.SubjectId}}</div>\n        <div><a ui-sref="mange.club-thread({id: v.SubjectId})"><img ng-src="{{v.ImageUrl}}" /></a></div>\n        <div>{{v.LongName}}</div>\n        <div>{{v.ShortName}}</div>\n        <div>{{v.Description}}</div>\n        <div>{{v.TotalArticle}}</div>\n        <div>{{v.CreateTime}}</div>\n        <div>\n            <p ng-click="editSubject(v.SubjectId)">编辑</p>\n            <p ng-click="delSubject(v.SubjectId)">删除</p>\n        </div>\n    </dd>\n</dl>\n\n<div class="mod_nodata mb10" ng-if="!DataList.SubjectList || DataList.SubjectList.length == 0"></div>\n\n<show-page></show-page>\n\n<ul class="mod_btn_list mb10">\n    <li ng-click="delSubject()">批量删除</li>\n    <li><a ui-sref="mange.subject-add">新建专题</a></li>\n</ul>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/subject_add.html",'<dl class="mod_path">\n    <dt>专题管理</dt>\n    <dd>您可以对专题进行管理</dd>\n</dl>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/subject_thread.html",'<dl class="mod_path">\n    <dt>专题管理</dt>\n    <dd>您可以对专题进行管理</dd>\n</dl>')}])}(),function(e){try{e=angular.module("Tjoys")}catch(t){e=angular.module("Tjoys",[])}e.run(["$templateCache",function(e){e.put("code/tp/user.html",'<dl class="mod_path">\n    <dt>用户管理</dt>\n    <dd>您可以对用户进行管理</dd>\n</dl>\n\n<dl class="mod_list mb10">\n    <dt>\n        <div ng-click="setSelect($event, \'all\')" class="t_checkbox" ng-class="{select: Page.isAll}"></div>\n        <div>编号</div>\n        <div>头像</div>\n        <div>用户昵称</div>\n        <div>性别</div>\n        <div>城市</div>\n        <div>手机号</div>\n        <div>经验值</div>\n        <div>注册时间</div>\n        <div>操作</div>\n    </dt>\n    <dd ng-repeat="(k, v) in DataList.UserList track by $index">\n        <div ng-click="setSelect($event)" data-id="{{v.UserId}}" data-key="{{k}}" class="t_checkbox" ng-class="{select: v.Check}"></div>\n        <div>{{v.UserId}}</div>\n        <div><img ng-src="{{v.UserImage}}" /></div>\n        <div>{{v.UserName}}</div>\n        <div>{{v.SexName}}</div>\n        <div>{{v.AreaName}}</div>\n        <div>{{v.Phone}}</div>\n        <div>{{v.Exper}}</div>\n        <div>{{v.CreateTime}}</div>\n        <div>\n            <p ng-click="delUser(v.User)">删除</p>\n        </div>\n    </dd>\n</dl>\n\n<div class="mod_nodata mb10" ng-if="!DataList.UserList || DataList.UserList.length == 0"></div>\n\n<show-page></show-page>')}])}(),angular.module("Tjoys").controller("tActivity",["$scope","$rootScope","$stateParams","widget",function(e,t,n,a){t.Menu="club",t.SubMenu="activity",e.Page={pageIndex:parseInt(n.index,0)||1,pageSize:20,isAll:!1,SelectId:[]},e.DataList={},e.loadMore=function(){e.Page.isAll=!1,a.ajaxRequest({scope:e,url:"getListActivity",data:{ActivityType:0,PageIndex:e.Page.pageIndex,PageSize:e.Page.pageSize},success:function(t){e.DataList=t},error:function(e){a.msgToast("获取活动失败")}})},e.loadMore(),e.setSelect=function(t,n){if(n&&"all"==n)e.Page.isAll?(angular.forEach(e.DataList.ActivityList,function(e,t){e.Check=!1}),e.Page.isAll=!1):(angular.forEach(e.DataList.ActivityList,function(e,t){e.Check=!0}),e.Page.isAll=!0);else{var a=angular.element(t.target),i=!0,l=a.attr("data-key");a.attr("data-id");e.DataList.ActivityList[l].Check&&(e.Page.isAll=!1),e.DataList.ActivityList[l].Check=!e.DataList.ActivityList[l].Check,angular.forEach(e.DataList.ActivityList,function(e,t){e.Check||(i=!1)}),i?e.Page.isAll=!0:e.Page.isAll=!1}},e.getSelect=function(){e.Page.SelectId=[],angular.forEach(e.DataList.ActivityList,function(t,n){t.Check&&e.Page.SelectId.push(t.ActivityId)})},e.delSubject=function(t){return t?e.Page.SelectId=[t]:e.getSelect(),0==e.Page.SelectId.length?void a.msgToast("请选择要删除的活动"):void a.ajaxRequest({scope:e,url:"delSubject",data:{ClubId:e.Page.SelectId},success:function(t){e.loadMore(),a.msgToast("删除活动成功")},error:function(e){a.msgToast("删除活动失败")}})}}]),angular.module("Tjoys").controller("tCate",["$scope","$rootScope","widget",function(e,t,n){t.Menu="article",t.SubMenu="cate",e.showCate=function(t){e.getData(t)},e.getData=function(t){return t||(t={}),t.e&&angular.element(t.e.target).attr("data-show")?void(t.pid?(angular.element(t.e.target).attr("data-show",""),e.CateList[t.pkey].Sub[t.key].ShowSub=!1,e.CateList[t.pkey].Sub[t.key].Sub=[]):(angular.element(t.e.target).attr("data-show",""),e.CateList[t.key].ShowSub=!1,e.CateList[t.key].Sub=[])):void n.ajaxRequest({scope:e,url:"getListCategory",data:{CateId:t.id||""},success:function(n){t.id?t.pid?(angular.element(t.e.target).attr("data-show",!0),e.CateList[t.pkey].Sub[t.key].ShowSub=!0,e.CateList[t.pkey].Sub[t.key].Sub=n.CategoryList):(angular.element(t.e.target).attr("data-show",!0),e.CateList[t.key].ShowSub=!0,e.CateList[t.key].Sub=n.CategoryList):e.CateList=n.CategoryList}})},e.getData(),e.cInput=[],e.toggle=function(t){var n,a=!1;angular.forEach(e.cInput,function(e,i){a||e==t&&(n=i,a=!0)}),a?e.cInput.splice(n,n):e.cInput.push(t),console.log(e.cInput)},e.modify=function(e){alert(e)},e["delete"]=function(e){alert(e)},e.add=function(e){alert(e)}}]),angular.module("Tjoys").controller("tClub",["$scope","$rootScope","widget",function(e,t,n){t.Menu="club",t.SubMenu="club",e.Page={isAll:!1,SelectId:[]},e.DataList={},e.loadMore=function(){e.Page.isAll=!1,n.ajaxRequest({scope:e,url:"getListClub",data:{},success:function(t){e.DataList=t},error:function(e){n.msgToast("获取圈子失败")}})},e.loadMore(),e.setSelect=function(t,n){if(n&&"all"==n)e.Page.isAll?(angular.forEach(e.DataList.ClubList,function(e,t){e.Check=!1}),e.Page.isAll=!1):(angular.forEach(e.DataList.ClubList,function(e,t){e.Check=!0}),e.Page.isAll=!0);else{var a=angular.element(t.target),i=!0,l=a.attr("data-key");a.attr("data-id");e.DataList.ClubList[l].Check&&(e.Page.isAll=!1),e.DataList.ClubList[l].Check=!e.DataList.ClubList[l].Check,angular.forEach(e.DataList.ClubList,function(e,t){e.Check||(i=!1)}),i?e.Page.isAll=!0:e.Page.isAll=!1}},e.getSelect=function(){e.Page.SelectId=[],angular.forEach(e.DataList.ClubList,function(t,n){t.Check&&e.Page.SelectId.push(t.ClubId)})},e.delClub=function(t){return t?e.Page.SelectId=[t]:e.getSelect(),0==e.Page.SelectId.length?void n.msgToast("请选择要删除的圈子"):void n.ajaxRequest({scope:e,url:"delClub",data:{ClubId:e.Page.SelectId},success:function(t){e.loadMore(),n.msgToast("删除圈子成功")},error:function(e){n.msgToast("删除圈子失败")}})}}]),angular.module("Tjoys").controller("tClubAdd",["$scope","$rootScope","widget",function(e,t,n){t.Menu="club",t.SubMenu="club-add"}]),angular.module("Tjoys").controller("tClubThread",["$scope","$rootScope","widget",function(e,t,n){t.Menu="club",t.SubMenu="club",e.DataList={}}]),angular.module("Tjoys").controller("tComment",["$scope","$rootScope","$stateParams","widget",function(e,t,n,a){t.Menu="article",t.SubMenu="comment",e.Page={pageIndex:parseInt(n.index,0)||1,pageSize:20,SelectId:[],isAll:!1},e.DataList={},e.loadMore=function(){a.ajaxRequest({scope:e,url:"getCommentList",data:{PageIndex:e.Page.pageIndex,PageSize:e.Page.pageSize},success:function(t){e.DataList=t}})},e.loadMore(),e.setSelect=function(t,n){if(n&&"all"==n)e.Page.isAll?(angular.forEach(e.DataList.CommentList,function(e,t){e.Check=!1}),e.Page.isAll=!1):(angular.forEach(e.DataList.CommentList,function(e,t){e.Check=!0}),e.Page.isAll=!0);else{var a=angular.element(t.target),i=!0,l=a.attr("data-key");a.attr("data-id");e.DataList.CommentList[l].Check&&(e.Page.isAll=!1),e.DataList.CommentList[l].Check=!e.DataList.CommentList[l].Check,angular.forEach(e.DataList.CommentList,function(e,t){e.Check||(i=!1)}),i?e.Page.isAll=!0:e.Page.isAll=!1}},e.getSelect=function(){e.Page.SelectId=[],angular.forEach(e.DataList.CommentList,function(t,n){t.Check&&e.Page.SelectId.push(t.CommentId)})},e.delComment=function(t){return t?e.Page.SelectId=[t]:e.getSelect(),0==e.Page.SelectId.length?void a.msgToast("请选择要删除的评论"):void a.ajaxRequest({scope:e,url:"delComment",data:{CommentId:e.Page.SelectId},success:function(t){e.loadMore(),a.msgToast("评论删除成功")},error:function(e){a.msgToast("评论删除失败")}})}}]),angular.module("Tjoys").controller("tIndex",["$scope","$rootScope","widget",function(e,t,n){t.Menu="web",t.SubMenu="web"}]),angular.module("Tjoys").controller("tList",["$state","$scope","$rootScope","$stateParams","widget",function(e,t,n,a,i){switch(n.Menu="article",n.SubMenu=a.type?"list-"+a.type:"list",t.Page={pageIndex:parseInt(a.index,0)||1,pageSize:20,CateId:[],tCateId:"",Type:"",SelectId:[],isAll:!1},t.tmpType=a.type||"",t.tmpType){case"yes":t.Page.Type="yCate";break;case"no":t.Page.Type="nCate";break;case"home":t.Page.Type="yHome";break;default:t.Page.Type=""}t.DataList={},t.loadMore=function(){t.Page.isAll=!1,i.ajaxRequest({scope:t,url:"getArticleList",data:{CateId:t.Page.tCateId,Type:t.Page.Type,PageIndex:t.Page.pageIndex,PageSize:t.Page.pageSize},success:function(e){angular.extend(t.DataList,e)}})},t.loadMore(),t.$watch("Page.tCateId",function(){t.loadMore()}),t.CateList=[],t.getCate=function(){i.ajaxRequest({scope:t,url:"getListCategory",data:{CateId:t.Page.tCateId},success:function(e){if(e.CategoryList.length>0){var n=t.CateList.length,a=t.Page.CateKey;e.CategoryList.unshift({CateName:"选择筛选栏目"}),t.Page.CateId.splice(a+1,n-a+1),t.CateList.splice(a+1,n-a+1),t.CateList.push(e)}}})},t.getCate(),t.changeCate=function(e){t.Page.tCateId=t.Page.CateId[e],t.Page.CateKey=e,t.getCate()},t.setCate=function(e){return 0==t.Page.SelectId.length?void i.msgToast("选择归类的图片"):void 0},t.setCheck=function(e,n){var a=angular.element(e.target),l="",d=a.attr("data-type");if(n?t.Page.SelectId=[n]:t.getSelect(),0==t.Page.SelectId.length)return void i.msgToast("选择推荐的图片");switch(d){case"nCate":l="取消栏目推荐";break;case"nHome":l="取消首页推荐";break;case"yCate":l="栏目推荐";break;case"yHome":l="首页推荐"}i.ajaxRequest({scope:t,url:"setArticleCheck",errmsg:l+"失败",data:{ArticleId:t.Page.SelectId,Type:d},success:function(e){i.msgToast(l+"成功"),t.loadMore()},error:function(e){i.msgToast(l+"失败")}})},t.setSelect=function(e,n){if(n&&"all"==n)t.Page.isAll?(angular.forEach(t.DataList.ArticleList,function(e,t){e.Check=!1}),t.Page.isAll=!1):(angular.forEach(t.DataList.ArticleList,function(e,t){e.Check=!0}),t.Page.isAll=!0);else{var a=angular.element(e.target),i=!0,l=a.attr("data-key");a.attr("data-id");t.DataList.ArticleList[l].Check&&(t.Page.isAll=!1),t.DataList.ArticleList[l].Check=!t.DataList.ArticleList[l].Check,angular.forEach(t.DataList.ArticleList,function(e,t){e.Check||(i=!1)}),i?t.Page.isAll=!0:t.Page.isAll=!1}},t.getSelect=function(){t.Page.SelectId=[],angular.forEach(t.DataList.ArticleList,function(e,n){e.Check&&t.Page.SelectId.push(e.ArticleId)})},t.delData=function(e,n){var a=angular.element(e.target);a.attr("data-type");return n?t.Page.SelectId=[n]:t.getSelect(),0==t.Page.SelectId.length?void i.msgToast("选择删除的图片"):void i.ajaxRequest({scope:t,url:"delArticle",data:{ArticleId:t.Page.SelectId},success:function(e){i.msgToast("删除成功"),t.loadMore()},error:function(e){i.msgToast("删除失败")}})}}]),angular.module("Tjoys").controller("tListDetail",["$sce","$scope","$rootScope","$stateParams","widget",function(e,t,n,a,i){n.Menu="article",n.SubMenu=a.type?"list-"+a.type:"list",t.DataList={},i.ajaxRequest({scope:t,url:"getContentArticle",data:{ArticleId:parseInt(a.id,0)},success:function(n){angular.extend(t.DataList,n),angular.forEach(t.DataList.Images,function(t,n){t.Description=e.trustAsHtml(t.Description)}),console.log(t.DataList)}})}]),angular.module("Tjoys").controller("tLogin",["$state","$scope","$rootScope","widget",function(e,t,n,a){n.showHeader=!1,t.cInput={},t.toLogin=function(){return t.cInput.Phone?t.cInput.Password?t.cInput.Code?void a.ajaxRequest({scope:t,url:"getLogin",data:{Phone:t.cInput.Phone,Password:md5(t.cInput.Password)},success:function(t){a.setLogin({UserId:t.UserId,Auth:t.Auth}),e.go("mange.list")},error:function(e){a.msgToast("登录失败")}}):void a.msgToast("请输入验证码!"):void a.msgToast("请输入登录密码!"):void a.msgToast("请输入手机号!")}}]),angular.module("Tjoys").controller("tPassword",["$scope","$rootScope","widget",function(e,t,n){t.Menu="web",t.SubMenu="password"}]),angular.module("Tjoys").controller("tRole",["$scope","$rootScope","widget",function(e,t,n){t.Menu="user",t.SubMenu="role",e.loadMore=function(){n.ajaxRequest({scope:e,url:"getAdminList",success:function(t){e.DataList=t}})},e.loadMore(),e.delRole=function(t){return t?void n.ajaxRequest({scope:e,url:"setRole",data:{UserId:t,Type:"user"},success:function(t){n.msgToast("删除管理员成功"),e.loadMore()}}):void n.msgToast("你没有选择用户")}}]),angular.module("Tjoys").controller("tRoleAdd",["$scope","$rootScope","widget",function(e,t,n){t.Menu="user",t.SubMenu="role-add",e.tInput={UserName:"",Type:"admin"},e.RoleList=[{id:"admin",name:"管理员"},{id:"user",name:"普通用户"}],e.addRole=function(){return e.tInput.UserName?e.tInput.Type?void n.ajaxRequest({scope:e,url:"setRole",data:{UserName:e.tInput.UserName,Type:e.tInput.Type},success:function(t){n.msgToast("用户设置成功"),e.tInput={UserName:"",Type:"admin"}},error:function(e){n.msgToast("用户设置失败")}}):void n.msgToast("请选择角色"):void n.msgToast("请输入用户名")}}]),angular.module("Tjoys").controller("tSubject",["$scope","$rootScope","$stateParams","widget",function(e,t,n,a){t.Menu="club",t.SubMenu="subject",e.Page={pageIndex:parseInt(n.index,0)||1,pageSize:20,isAll:!1,SelectId:[]},e.DataList={},e.loadMore=function(){e.Page.isAll=!1,a.ajaxRequest({scope:e,url:"getListSubject",data:{SortType:3,PageIndex:e.Page.pageIndex,PageSize:e.Page.pageSize},success:function(t){e.DataList=t},error:function(e){a.msgToast("获取专题失败")}})},e.loadMore(),e.setSelect=function(t,n){if(n&&"all"==n)e.Page.isAll?(angular.forEach(e.DataList.SubjectList,function(e,t){e.Check=!1}),e.Page.isAll=!1):(angular.forEach(e.DataList.SubjectList,function(e,t){e.Check=!0}),e.Page.isAll=!0);else{var a=angular.element(t.target),i=!0,l=a.attr("data-key");a.attr("data-id");e.DataList.SubjectList[l].Check&&(e.Page.isAll=!1),e.DataList.SubjectList[l].Check=!e.DataList.SubjectList[l].Check,angular.forEach(e.DataList.SubjectList,function(e,t){e.Check||(i=!1)}),i?e.Page.isAll=!0:e.Page.isAll=!1}},e.getSelect=function(){
e.Page.SelectId=[],angular.forEach(e.DataList.SubjectList,function(t,n){t.Check&&e.Page.SelectId.push(t.SubjectId)})},e.delSubject=function(t){return t?e.Page.SelectId=[t]:e.getSelect(),0==e.Page.SelectId.length?void a.msgToast("请选择要删除的专题"):void a.ajaxRequest({scope:e,url:"delSubject",data:{ClubId:e.Page.SelectId},success:function(t){e.loadMore(),a.msgToast("删除专题成功")},error:function(e){a.msgToast("删除专题失败")}})}}]),angular.module("Tjoys").controller("tSubjectAdd",["$scope","$rootScope","widget",function(e,t,n){t.Menu="club",t.SubMenu="subject-add"}]),angular.module("Tjoys").controller("tSubjectThread",["$scope","$rootScope","widget",function(e,t,n){t.Menu="club",t.SubMenu="subject"}]),angular.module("Tjoys").controller("tUser",["$scope","$rootScope","$stateParams","widget",function(e,t,n,a){t.Menu="user",t.SubMenu="user",e.Page={pageIndex:parseInt(n.index,0)||1,pageSize:20,SelectId:[],isAll:!1},e.DataList={},e.loadMore=function(){e.Page.isAll=!1,a.ajaxRequest({scope:e,url:"getUserList",data:{PageIndex:e.Page.pageIndex,PageSize:e.Page.pageSize},success:function(t){e.DataList=t}})},e.loadMore(),e.setSelect=function(t,n){if(n&&"all"==n)e.Page.isAll?(angular.forEach(e.DataList.UserList,function(e,t){e.Check=!1}),e.Page.isAll=!1):(angular.forEach(e.DataList.UserList,function(e,t){e.Check=!0}),e.Page.isAll=!0);else{var a=angular.element(t.target),i=!0,l=a.attr("data-key");a.attr("data-id");e.DataList.UserList[l].Check&&(e.Page.isAll=!1),e.DataList.UserList[l].Check=!e.DataList.UserList[l].Check,angular.forEach(e.DataList.UserList,function(e,t){e.Check||(i=!1)}),i?e.Page.isAll=!0:e.Page.isAll=!1}},e.getSelect=function(){e.Page.SelectId=[],angular.forEach(e.DataList.UserList,function(t,n){t.Check&&e.Page.SelectId.push(t.UserId)})},e.delUser=function(t){return t?e.Page.SelectId=[t]:e.getSelect(),0==e.Page.SelectId.length?void a.msgToast("选择删除的用户"):void a.ajaxRequest({scope:e,url:"delUser",data:{UserId:e.Page.SelectId},success:function(t){a.msgToast("删除成功"),e.loadMore()},error:function(e){a.msgToast("删除失败")}})}}]);